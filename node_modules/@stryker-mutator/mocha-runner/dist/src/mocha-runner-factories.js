"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createMochaTestRunnerFactory = exports.createMochaTestRunner = void 0;
const tslib_1 = require("tslib");
const core_1 = require("@stryker-mutator/api/core");
const plugin_1 = require("@stryker-mutator/api/plugin");
const util_1 = require("@stryker-mutator/util");
const mocha_adapter_1 = require("./mocha-adapter");
const mocha_options_loader_1 = require("./mocha-options-loader");
const mocha_test_runner_1 = require("./mocha-test-runner");
const pluginTokens = (0, tslib_1.__importStar)(require("./plugin-tokens"));
exports.createMochaTestRunner = createMochaTestRunnerFactory();
function createMochaTestRunnerFactory(namespace = core_1.INSTRUMENTER_CONSTANTS.NAMESPACE) {
    mochaTestRunnerFactory.inject = (0, plugin_1.tokens)(plugin_1.commonTokens.injector);
    function mochaTestRunnerFactory(injector) {
        return injector
            .provideClass(pluginTokens.loader, mocha_options_loader_1.MochaOptionsLoader)
            .provideClass(pluginTokens.mochaAdapter, mocha_adapter_1.MochaAdapter)
            .provideClass(pluginTokens.directoryRequireCache, util_1.DirectoryRequireCache)
            .provideValue(pluginTokens.globalNamespace, namespace)
            .injectClass(mocha_test_runner_1.MochaTestRunner);
    }
    return mochaTestRunnerFactory;
}
exports.createMochaTestRunnerFactory = createMochaTestRunnerFactory;
//# sourceMappingURL=mocha-runner-factories.js.map